<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="author" content="Faiz Khalid">
    <meta name="description" content="Practicing Exercises">
    <title>App</title>
    <style></style>
    </head>
    <body>
        <button class="js-start-button" style="padding: 5px 8px; margin-right: 10px;" onclick="
            changeButton();
            ">Start</button>

        <button class="js-message" onclick="
            displayMessage();
        ">Add to cart</button>
        <p class="js-display"></p>

        <button onclick="
        messages++;
        displayNotification();
        " class="js-add-button">Add</button>

        <button onclick="
        if (messages > 0) {
            messages--;
            if (messages === 0) {
            stopNotification();
        }
    }
        
        "  class="js-remove-button">Remove</button>
        <script>
            /* const add = function() {
                console.log(2+3);
            }
            add();
            add(); */

            /* function runTwice(fun) {
                fun();
                fun();
            }
            runTwice(function() {
                console.log('12b');
            }); 
            function add() {
                console.log(2+3);
            }
           runTwice(add);
             */

           /*  function changeButton() {
               const buttonElement = document.querySelector('.js-start-button'); 

               setTimeout(function() {
                buttonElement.innerHTML = 'Finished!';
               }, 1000);
            } */

            /* function changeButton() {
               const buttonElement = document.querySelector('.js-start-button'); 

               buttonElement.innerHTML = 'Loading!';

               setTimeout(function() {
                buttonElement.innerHTML = 'Finished!';
               }, 2000);
            }

            function displayMessage() {
                const buttonElement = document.querySelector('.js-display');

                buttonElement.innerHTML = 'Added';

                setTimeout(function() {
                    buttonElement.innerHTML = '';
                }, 2000);
            } */

           /*  let timeoutID;
            function displayMessage() {
                const buttonElement = document.querySelector('.js-display');

                buttonElement.innerHTML = 'Added';

                clearTimeout(timeoutID); 
                // First, cancel the previous timeout so that it does not remove the message too quickly.

                timeoutID = setTimeout(function() {
                    buttonElement.innerHTML = '';
                }, 4000);
            } */

           /*  setInterval(function() { 
                if (document.tile === 'App') { 
                    document.title = '(2) New messages'; 
                } else { 
                    document.title = 'App'; 
                } 
            }, 1000); */

            let messages = 2;
            let intervalID;
            let isDisplayingNotification;

            displayNotification();

            function displayNotification() {
                if (isDisplayingNotification) {
                    return;
                }
                isDisplayingNotification = true;

                intervalID = setInterval(function() {
                    if (document.title === 'App') {
                        document.title = `(${messages} New messages`;
                    } else {
                        document.title = `App`;
                    }
                }, 1000);
            }
            

            function stopNotification() {
                isDisplayingNotification = false;

                clearInterval(intervalID);
                document.title = 'App';
            }
        </script>
    </body>
    </html>

